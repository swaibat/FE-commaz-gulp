{{#unlesspage 'abandoned_cart' 'user_verification' 'forgot-password' 'order_email'}}
<!DOCTYPE html>
<html lang="en">

<head>
	{{!â€” Required meta tags --}}
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<title>{{ title }}</title>
	<!-- Google Font -->
	<link rel="icon" type="image/x-icon" href="{{root}}assets/images/favicon.ico" />
	<link rel="stylesheet" href="{{root}}assets/vendors/OwlCarousel2-2.3.4/assets/owl.carousel.min.css" />
	<link rel="stylesheet" href="{{root}}assets/vendors/select2/css/select2.min.css" />
	<link rel="stylesheet" href="{{root}}assets/css/style.css" />
	<script src="{{root}}assets/js/bundle.js"></script>
	<script src="{{root}}assets/vendors/listjs-v1.5.0/list.min.js"></script>
</head>

<body class="">
	{{>navigation}}
	{{/unlesspage}}
	{{> body}}
	{{#unlesspage 'abandoned_cart' 'user_verification' 'forgot-password' 'order_email'}}
	{{> footer}}
</body>
<script src="{{root}}assets/vendors/OwlCarousel2-2.3.4/owl.carousel.min.js"></script>
<script src="{{root}}assets/vendors/select2/js/select2.full.min.js"></script>
<script src="{{root}}assets/vendors/star-rating-svg/jquery.star-rating-svg.min.js"></script>
<script>
	var filterOptions = {
		valueNames: ['name', 'type'],
		item: `<li class="chip shadow-sm p-2">
            <span class="type font-weight-bold">category</span><span class="mr-1">:</span><span class="name"></span>
            <span class="btn p-0 m-0 va va-cross ml-3" onclick="remove(this)"></span>
        </li>`
	};

	const filters = new List('filter-panel', filterOptions);

	function remove(data) {
		const name = $(data).parent().find('.name').text();
		$(`#filter-Sidenav #${name}`).prop('checked', false)
		filters.remove('name', name);
	}

	$('#filter-Sidenav input').change(({ target }) => {
		if (!filters.get("type", target.name).length) {
			filters.add({ name: target.id, type: target.name });
		}
	})

	// clear the filter List
	$('#clear-all').click(() => {
		filters.clear()
	})
</script>
<script>

	// shopping cart


	$(".read-only").starRating({
		starShape: 'rounded',
		readOnly: true,
		starSize: 17,
		activeColor: 'orange',
		useGradient: false
	});
	$('.current').click(() => {
		$('.select-nav').addClass('show');
	});
	$('.select-nav .nav-item').click(() => {
		$('.select-nav').toggleClass('show');
	});

	// Cart script
	const cartOptions = { valueNames: ['title', 'price'] };
	const notFound = () => {
		$('#tax, #shipping').text(0)
		$(`<h4 id="notfound" class="m-auto">No Items in Cart</h4>`).appendTo(".cart-wrapper")
	};

	const cart = new List('shopping-cart', cartOptions);
	// update total


	// $('#shopping-cart .btn').click(() => {
	// 	const domPrices = $('.price').map((e, i) => JSON.parse($(i).text())).get();
	// 	const domSumPrices = domPrices.reduce(function (a, b) {
	// 		return a + b;
	// 	}, 0);
	// 	// add to sub total 
	// 	$('#s-total').text(domSumPrices);
	// 	// add to total (sub-total + shipping + tax)
	// 	$('#g-total').text(domSumPrices + JSON.parse($('#shipping').text()) + JSON.parse($('#tax').text()));
	// });



	$('.btn-up').click(({ target }) => {
		const id = target.id.split('-')[2]
		const input = $(`#form-control-${id}`)
		input.val(JSON.parse(input.val()) + 1)
		$(`#price-${id}`).text(JSON.parse(input.val()) * JSON.parse($(`#price-${id}`).text()))
		// updateTotal(cart)
	})

	$('.btn-down').click(({ target }) => {
		const id = target.id.split('-')[2]
		const input = $(`#form-control-${id}`)
		if (input.val() > 1) {
			$(`#price-${id}`).text(JSON.parse($(`#price-${id}`).text()) / JSON.parse(input.val()))
			input.val(JSON.parse(input.val()) - 1)
		}
		// updateTotal(cart)
	})

	$('#shopping-cart .btn').click(({ target }) => {
		cart.remove('title', $(`#${target.id}`).parent().find(".title").text());
	});
	// clear cart
	$('#clear-cart').click(() => {
		cart.clear()
		$('.badge-cart, #g-total, #s-total, #shipping').text(0)
		notFound()
	})
	// remove one item
	$("#shopping-cart .btn-cancel").click(() => {
		// reduce the counter price
		const prices = cart.visibleItems.map((e) => count = + JSON.parse(e.values().price));
		const sum = prices.reduce(function (a, b) {
			return a + b;
		}, 0);
		// add to sub total 
		$('#s-total').text(sum);
		// add to total (sub-total + shipping + tax)
		$('#g-total').text(sum + JSON.parse($('#shipping').text()) + JSON.parse($('#tax').text()));
		$('.badge-cart').text(cart.visibleItems.length)
		if (!cart.visibleItems.length) {
			notFound()
		}
	})

	// add to cart
	$('.ecommerce-card .cart').change(() => {
		$('.badge-cart').text(JSON.parse($('.badge-cart').text()) + 1)
	})



	// shop

	$(function () {
		$('[data-toggle="tooltip"]').tooltip()
	})
	var options = {
		valueNames: ['name', 'subject', 'body', 'read', 'status'],
		page: 5,
		pagination: true
	};

	var hackerList = new List('hacker-list', options);

	$('#notify-nav li').click(({ target }) => {
		hackerList.filter(function (item) {
			if (item.values().status == target.id) {
				return true;
			} else {
				return false;
			}
		});
		hackerList.filter();
	})



	// select 2
	$(document).ready(function () {
		$('.select2').select2();
	});


	$('#switch').change(() => {
		$('body').toggleClass('dark-mode')
		!localStorage.getItem('theme') ? localStorage.setItem('theme', 'dark-mode') : localStorage.removeItem('theme')
	})
	$('body').addClass(localStorage.getItem('theme'))
	$('#toggle-filter').click(() => {
		$('#products-list').toggleClass('ml-0')
		$('.grid-view').toggleClass('grid-view-sm')
		$('#filter-Sidenav').toggleClass('toggle-filter')
	})
	$('.sidebar-close-icon').click(() => {
		$('.grid-view').toggleClass('grid-view-sm')
		$('#filter-Sidenav').toggleClass('w-260')
	})
	$('#category-nav .nav-item').mouseover(() => {
		$('.drop-list').css('height', $('.carousel-inner').height()).css('width', $('.carousel-inner').outerWidth())
			.css('margin-left', $('#category-nav').outerWidth())
	})
	$('#carousel').owlCarousel({
		autoplay: false,
		lazyLoad: true,
		loop: true,
		margin: 20,
		responsiveClass: true,
		autoHeight: true,
		autoplayTimeout: 7000,
		smartSpeed: 800,
		nav: true,
		responsive: {
			0: {
				items: 1,
			},

			600: {
				items: 3,
			},

			1024: {
				items: 4,
			},

			1366: {
				items: 4,
			},
		},
	});
</script>

<!-- JS, Popper.js, and jQuery -->
<script>
	$(window).resize(() => $('.category-menu .dropdown-menu').css('width', $('.container').outerWidth()));
	$('.category-menu').click(() => $('.category-menu .dropdown-menu').css('width', $('.container').outerWidth()));

	$('#cart-btn').click(() => {
		$('#shopping-cart').toggleClass('cart-area');
		$('.cart-overlay').toggleClass('d-none');
	});
	$('#cart-close').click(() => {
		$('#shopping-cart').toggleClass('cart-area');
		$('.cart-overlay').toggleClass('d-none');
	});
	$('.cart-overlay').click(() => {
		$('#shopping-cart').toggleClass('cart-area');
		$('.cart-overlay').toggleClass('d-none');
	});
	$(document).ready(function () {
		var pic_X = $('.menu').offset().left;
		var pic_Y = $('.menu').offset().top;
		var pic_W = $('.menu').width() / 2;
		var pic_H = $('.menu').height() / 2;
		var center_X = pic_X + pic_W;
		var center_Y = pic_Y + pic_H;
		var movestop = pic_W / 10;
		$('.menu').mousemove(function (event) {
			var mouse_X = event.pageX;
			var mouse_Y = event.pageY;
			if (mouse_X - center_X <= 0) {
				moveImg(mouse_X, mouse_Y, 'left');
			} else {
				moveImg(mouse_X, mouse_Y);
			}
		});
		function moveImg(m_X, m_Y, dir) {
			var index = Math.ceil(Math.abs(m_X - center_X) / movestop);
			if (dir) {
				$('.menu img').eq(index).show().siblings().hide();
			} else {
				$('.menu img')
					.eq(18 - index)
					.show()
					.siblings()
					.hide();
			}
		}
	});
	$(window).resize(function () {
		$('.drop-list').css('width', $('#slider').outerWidth()).css('height', $('#slider').outerHeight()).css('margin-left', $('#category-nav').outerWidth);
	});
	// cart buttons
	// personal details
	$('#to-shopping').click((e) => {
		e.preventDefault();
		$('#shipping').addClass('show');
		$('[data-target="#personalDetails"]').removeClass('d-none');
	});

	$('input').keyup(() => {
		if ($('#firstname').val() && $('#lastname').val() && $('#email').val()) {
			$('#to-shopping').removeAttr('disabled');
		}
	});

	// Javascript to enable link to tab
	$(document).ready(() => {
		var url = document.location.toString();

		if (url.match('#')) {
			// $(`#profile`).tab('dispose');
			$(`#${url.split('#')[1]}`).tab('dispose');
		}

		// Change hash for page-reload
		$('.nav-tabs a').on('shown.bs.tab', function (e) {
			window.location.hash = e.target.hash;
		})
	})


	$('input').keyup(() => {
		const emptyValue = $('#shipping-form')
			.serializeArray()
			.find((e) => e.value == '');
		if (!emptyValue) {
			$('#to-payments').removeAttr('disabled');
		}
	});
	$('#to-payments').click((e) => {
		e.preventDefault();
		$('#payments').addClass('show');
		$('[data-target="#shipping"]').removeClass('d-none');
	});

	(function init() {
		function getTimeRemaining(endtime) {
			var t = Date.parse(endtime) - Date.parse(new Date());
			var seconds = Math.floor((t / 1000) % 60);
			var minutes = Math.floor((t / 1000 / 60) % 60);
			var hours = Math.floor((t / (1000 * 60 * 60)) % 24);
			var days = Math.floor(t / (1000 * 60 * 60 * 60 * 24));
			return {
				'total': t,
				'days': days,
				'hours': hours,
				'minutes': minutes,
				'seconds': seconds
			};
		}

		function initializeClock(endtime) {
			var timeinterval = setInterval(function () {
				var t = getTimeRemaining(endtime);
				document.querySelector(".days > .value").innerText = t.days;
				document.querySelector(".hours > .value").innerText = t.hours;
				document.querySelector(".minutes > .value").innerText = t.minutes;
				document.querySelector(".seconds > .value").innerText = t.seconds;
				if (t.total <= 0) {
					clearInterval(timeinterval);
				}
			}, 1000);
		}
		initializeClock(((new Date()).getFullYear() + 1) + "/1/1")
	})()

</script>

</html>
{{/unlesspage}}